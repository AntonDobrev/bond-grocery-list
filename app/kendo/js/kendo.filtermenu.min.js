/*
* Kendo UI Beta v2014.3.1029 (http://www.telerik.com/kendo-ui)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

!function(t,define){define(["./kendo.datepicker.min","./kendo.numerictextbox.min","./kendo.dropdownlist.min"],t)}(function(){return function(t){function e(n,i){n.filters&&(n.filters=t.grep(n.filters,function(t){return e(t,i),t.filters?t.filters.length:t.field!=i}))}function n(t){var e,n,i,o,r,a;if(t&&t.length)for(a=[],e=0,n=t.length;n>e;e++)i=t[e],r=i.text||i.value||i,o=null==i.value?i.text||i:i.value,a[e]={text:r,value:o};return a}function i(e,n){return t.grep(e,function(e){return e.filters?(e.filters=t.grep(e.filters,function(t){return t.field!=n}),e.filters.length):e.field!=n})}var o=window.kendo,r=o.ui,a=t.proxy,s="kendoPopup",l="init",c=".kendoFilterMenu",d="Is equal to",h="Is not equal to",u={number:"numerictextbox",date:"datepicker"},f={string:"text",number:"number",date:"date"},p=o.isFunction,g=r.Widget,m='<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',v='<div><div class="k-filter-help-text">#=messages.info#</div><select data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',y='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[0].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[0].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#if(extra){#</ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="and" />#=messages.and#</label></li><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="or" />#=messages.or#</label></li></ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[1].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[1].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[1].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#}#</ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></div></form></div>',w='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label></li><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label></li></ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>',_=g.extend({init:function(e,n){var i,r,s,l,d=this,h="string";g.fn.init.call(d,e,n),i=d.operators=n.operators||{},e=d.element,n=d.options,n.appendToElement||(s=e.addClass("k-with-icon k-filterable").find(".k-grid-filter"),s[0]||(s=e.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),s.attr("tabindex",-1).on("click"+c,a(d._click,d))),d.link=s||t(),d.dataSource=n.dataSource,d.field=n.field||e.attr(o.attr("field")),d.model=d.dataSource.reader.model,d._parse=function(t){return t+""},d.model&&d.model.fields&&(l=d.model.fields[d.field],l&&(h=l.type||"string",l.parse&&(d._parse=a(l.parse,l)))),n.values&&(h="enums"),d.type=h,i=i[h]||n.operators[h];for(r in i)break;d._defaultFilter=function(){return{field:d.field,operator:r||"eq",value:""}},d._refreshHandler=a(d.refresh,d),d.dataSource.bind("change",d._refreshHandler),n.appendToElement?d._init():d.refresh()},_init:function(){var e,n=this,i=n.options.ui,r=p(i);n.pane=n.options.pane,n.pane&&(n._isMobile=!0),r||(e=i||u[n.type]),n._isMobile?n._createMobileForm(e):n._createForm(e),n.form.on("submit"+c,a(n._submit,n)).on("reset"+c,a(n._reset,n)),r&&n.form.find(".k-textbox").removeClass("k-textbox").each(function(){i(t(this))}),n.form.find("["+o.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+o.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+o.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+o.attr("role")+"=datepicker]").removeClass("k-textbox"),n.refresh(),n.trigger(l,{field:n.field,container:n.form})},_createForm:function(e){var i=this,r=i.options,l=i.operators||{},d=i.type;l=l[d]||r.operators[d],i.form=t('<form class="k-filter-menu"/>').html(o.template("boolean"===d?m:v)({field:i.field,format:r.format,ns:o.ns,messages:r.messages,extra:r.extra,operators:l,type:d,role:e,values:n(r.values)})),r.appendToElement?(i.element.append(i.form),i.popup=i.element.closest(".k-popup").data(s)):i.popup=i.form[s]({anchor:i.link,open:a(i._open,i),activate:a(i._activate,i),close:function(){i.options.closeCallback&&i.options.closeCallback(i.element)}}).data(s),i.form.on("keydown"+c,a(i._keydown,i))},_createMobileForm:function(e){var i=this,r=i.options,a=i.operators||{},s=i.type;a=a[s]||r.operators[s],i.form=t("<div />").html(o.template("boolean"===s?w:y)({field:i.field,format:r.format,ns:o.ns,messages:r.messages,extra:r.extra,operators:a,type:s,role:e,useRole:!o.support.input.date&&"date"===s||"number"===s,inputType:f[s],values:n(r.values)})),i.view=i.pane.append(i.form.html()),i.form=i.view.element.find("form"),i.view.element.on("click",".k-submit",function(t){i.form.submit(),t.preventDefault()}).on("click",".k-cancel",function(t){i._closeForm(),t.preventDefault()})},refresh:function(){var t=this,e=t.dataSource.filter()||{filters:[],logic:"and"};t.filterModel=o.observable({logic:"and",filters:[t._defaultFilter(),t._defaultFilter()]}),t.form&&o.bind(t.form.children().first(),t.filterModel),t._bind(e)?t.link.addClass("k-state-active"):t.link.removeClass("k-state-active")},destroy:function(){var t=this;g.fn.destroy.call(t),t.form&&(o.unbind(t.form),o.destroy(t.form),t.form.unbind(c),t.popup&&(t.popup.destroy(),t.popup=null),t.form=null),t.view&&(t.view.purge(),t.view=null),t.link.unbind(c),t._refreshHandler&&(t.dataSource.unbind("change",t._refreshHandler),t.dataSource=null),t.element=t.link=t._refreshHandler=t.filterModel=null},_bind:function(t){var e,n,i,o,r=this,a=t.filters,s=!1,l=0,c=r.filterModel;for(e=0,n=a.length;n>e;e++)o=a[e],o.field==r.field?(c.set("logic",t.logic),i=c.filters[l],i||(c.filters.push({field:r.field}),i=c.filters[l]),i.set("value",r._parse(o.value)),i.set("operator",o.operator),l++,s=!0):o.filters&&(s=s||r._bind(o));return s},_merge:function(n){var i,o,r,a=this,s=n.logic||"and",l=n.filters,c=a.dataSource.filter()||{filters:[],logic:"and"};for(e(c,a.field),l=t.grep(l,function(t){return""!==t.value&&null!=t.value}),o=0,r=l.length;r>o;o++)i=l[o],i.value=a._parse(i.value);return l.length&&(c.filters.length?(n.filters=l,"and"!==c.logic&&(c.filters=[{logic:c.logic,filters:c.filters}],c.logic="and"),c.filters.push(l.length>1?n:l[0])):(c.filters=l,c.logic=s)),c},filter:function(t){t=this._merge(t),t.filters.length&&this.dataSource.filter(t)},clear:function(){var e=this,n=e.dataSource.filter()||{filters:[]};n.filters=t.grep(n.filters,function(t){return t.filters?(t.filters=i(t.filters,e.field),t.filters.length):t.field!=e.field}),n.filters.length||(n=null),e.dataSource.filter(n)},_submit:function(t){t.preventDefault(),t.stopPropagation(),this.filter(this.filterModel.toJSON()),this._closeForm()},_reset:function(){this.clear(),this._closeForm()},_closeForm:function(){this._isMobile?this.pane.navigate("",this.options.animations.right):this.popup.close()},_click:function(t){t.preventDefault(),t.stopPropagation(),this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle()},_open:function(){var e;t(".k-filter-menu").not(this.form).each(function(){e=t(this).data(s),e&&e.close()})},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_keydown:function(t){t.keyCode==o.keys.ESC&&this.popup.close()},events:[l],options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{eq:d,neq:h,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:d,neq:h,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:d,neq:h,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:d,neq:h}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",cancel:"Cancel"},animations:{left:"slide",right:"slide:right"}}});r.plugin(_)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(t,e){e()});