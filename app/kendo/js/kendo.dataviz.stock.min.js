/*
* Kendo UI Beta v2014.3.1029 (http://www.telerik.com/kendo-ui)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

!function(t,define){define(["./kendo.dataviz.chart.min"],t)}(function(){return function(t,e){function n(){}function i(t){return n.prototype=t,new n}var o,r=window.kendo,a=r.Class,s=r.Observable,l=r.deepExtend,c=Math,h=t.proxy,d=r.dataviz,u=d.defined,f=d.filterSeriesByType,p=r.template,g=d.ui.Chart,m=d.Selection,v=d.addDuration,y=d.last,w=d.limitValue,_=d.lteDateIndex,x=d.renderTemplate,b=d.toDate,k=d.toTime,C=28,S="change",T="k-",D="drag",A="dragEnd",P="_navigator",M=P,E=d.EQUALLY_SPACED_SERIES,I=3,L="zoom",B="zoomEnd",z=g.extend({init:function(e,n){t(e).addClass(T+"chart"),g.fn.init.call(this,e,n)},_applyDefaults:function(t,e){var n=this,i=n.element.width()||d.DEFAULT_WIDTH,o={seriesDefaults:{categoryField:t.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:c.floor(i/C)}}};e&&(e=l({},e,o)),n._navigator||F.setup(t,e),g.fn._applyDefaults.call(n,t,e)},_initDataSource:function(t){var e,n,i=t||{},o=i.dataSource,r=o&&o.serverFiltering,a=[].concat(i.categoryAxis)[0],s=i.navigator||{},c=s.select,h=c&&c.from&&c.to;r&&h&&(e=[].concat(o.filter||[]),n=new d.DateCategoryAxis(l({baseUnit:"fit"},a,{categories:[c.from,c.to]})),o.filter=F.buildFilter(n.range().min,c.to).concat(e)),g.fn._initDataSource.call(this,t)},options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0,template:"#= kendo.toString(category, 'd') #"},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}},_resize:function(){var t=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=t},_redraw:function(){var t=this,e=t._navigator;e&&e.dataSource?e.redrawSlaves():t._fullRedraw()},_fullRedraw:function(){var t=this,e=t._navigator;e||(e=t._navigator=new F(t)),g.fn._redraw.call(t),e.redraw(),e.redrawSlaves()},_onDataChanged:function(){var t=this;g.fn._onDataChanged.call(t),t._dataBound=!0},_bindCategoryAxis:function(t,e,n){var i,o=this,r=o.options.categoryAxis,a=r.length;if(g.fn._bindCategoryAxis.apply(this,arguments),t.name===M)for(;a>n;)i=r[n++],i.pane==P&&(i.categories=t.categories)},_trackSharedTooltip:function(t){var e=this,n=e._plotArea,i=n.paneByPoint(t);i&&i.options.name===P?e._unsetActivePoint():g.fn._trackSharedTooltip.call(e,t)},destroy:function(){var t=this;t._navigator.destroy(),g.fn.destroy.call(t)}}),F=s.extend({init:function(t){var e=this;e.chart=t,e.options=l({},e.options,t.options.navigator),e._initDataSource(),u(e.options.hint.visible)||(e.options.hint.visible=e.options.visible),t.bind(D,h(e._drag,e)),t.bind(A,h(e._dragEnd,e)),t.bind(L,h(e._zoom,e)),t.bind(B,h(e._zoomEnd,e))},options:{},_initDataSource:function(){var t=this,e=t.options,n=e.autoBind,i=e.dataSource;u(n)||(n=t.chart.options.autoBind),t._dataChangedHandler=h(t._onDataChanged,t),i&&(t.dataSource=r.data.DataSource.create(i).bind(S,t._dataChangedHandler),n&&t.dataSource.fetch())},_onDataChanged:function(){var t,e,n,i,o,r=this,a=r.chart,s=a.options.series,l=s.length,c=a.options.categoryAxis,h=c.length,d=r.dataSource.view();for(t=0;l>t;t++)n=s[t],n.axis==M&&a._isBindable(n)&&(n.data=d);for(e=0;h>e;e++)i=c[e],i.pane==P&&(i.name==M?(a._bindCategoryAxis(i,d,e),o=i.categories):i.categories=o);a._model&&(r.redraw(),r.filterAxes(),(!a.options.dataSource||a.options.dataSource&&a._dataBound)&&r.redrawSlaves())},destroy:function(){var t=this,e=t.dataSource;e&&e.unbind(S,t._dataChangeHandler),t.selection&&t.selection.destroy()},redraw:function(){this._redrawSelf();var e=this,n=e.chart,r=e.options,a=e.mainAxis(),s=i(a),l=a.options.categories,c=e.options.select||{},h=e.selection,d=a.range(),u=d.min,f=d.max,p=b(c.from)||u,g=b(c.to)||f;u>p&&(p=u),g>f&&(g=f),l.length>0&&(h&&(h.destroy(),h.wrapper.remove()),s.box=a.box,h=e.selection=new m(n,s,{min:u,max:f,from:p,to:g,selectStart:t.proxy(e._selectStart,e),select:t.proxy(e._select,e),selectEnd:t.proxy(e._selectEnd,e),mousewheel:{zoom:"left"}}),r.hint.visible&&(e.hint=new o(n.element,{min:u,max:f,template:r.hint.template,format:r.hint.format})),e.readSelection(),e.filterAxes())},_redrawSelf:function(t){var e=this.chart._plotArea;e&&e.redraw(y(e.panes),t)},redrawSlaves:function(){var t=this,e=t.chart,n=e._plotArea,i=n.panes.slice(0,-1);n.srcSeries=e.options.series,n.redraw(i)},_drag:function(t){var e,n,i,o=this,r=o.chart,a=r._eventCoordinates(t.originalEvent),s=o.mainAxis(),l=s.range(),c=s.pane.box.containsPoint(a),h=r._plotArea.categoryAxis,d=t.axisRanges[h.options.name],u=o.options.select,f=o.selection;d&&!c&&f&&(e=u.from&&u.to?k(u.to)-k(u.from):k(f.options.to)-k(f.options.from),n=b(w(k(d.min),l.min,k(l.max)-e)),i=b(w(k(n)+e,k(l.min)+e,l.max)),o.options.select={from:n,to:i},o._liveDrag()&&(o.filterAxes(),o.redrawSlaves()),f.set(n,i),o.showHint(n,i))},_dragEnd:function(){var t=this;t.filterAxes(),t.filterDataSource(),t.redrawSlaves(),t.hint&&t.hint.hide()},_liveDrag:function(){var t=r.support,e=t.touch,n=t.browser,i=n.mozilla,o=n.msie&&9>n.version;return!e&&!i&&!o},readSelection:function(){var t=this,e=t.selection,n=e.options,i=t.options.select;i.from=n.from,i.to=n.to},filterAxes:function(){var t,e,n=this,i=n.options.select||{},o=n.chart,r=o.options.categoryAxis,a=i.from,s=i.to;for(t=0;r.length>t;t++)e=r[t],e.pane!==P&&(e.min=b(a),e.max=b(s))},filterDataSource:function(){var t,e=this,n=e.options.select||{},i=e.chart,o=i.dataSource,r=o&&o.options.serverFiltering;e.dataSource&&r&&(t=new d.DateCategoryAxis(l({baseUnit:"fit"},i.options.categoryAxis[0],{categories:[n.from,n.to]})).options,o.filter(F.buildFilter(v(t.min,-t.baseUnitStep,t.baseUnit),v(t.max,t.baseUnitStep,t.baseUnit))))},_zoom:function(t){var e,n,i=this,o=i.chart,a=t.delta,s=o._plotArea.categoryAxis,l=i.options.select,h=i.selection,d=i.mainAxis().options.categories;h&&(e=_(h.options.from,d),n=_(h.options.to,d),t.originalEvent.preventDefault(),c.abs(a)>1&&(a*=I),n-e>1?(h.expand(a),i.readSelection()):(s.options.min=l.from,l.from=s.scaleRange(-t.delta).min),r.support.touch||(i.filterAxes(),i.redrawSlaves()),h.set(l.from,l.to),i.showHint(i.options.select.from,i.options.select.to))},_zoomEnd:function(t){this._dragEnd(t)},showHint:function(t,e){var n=this,i=n.chart,o=i._plotArea;n.hint&&n.hint.show(t,e,o.backgroundBox())},_selectStart:function(t){var e=this.chart;e._selectStart.call(e,t)},_select:function(t){var e=this,n=e.chart;e.showHint(t.from,t.to),n._select.call(n,t)},_selectEnd:function(t){var e=this,n=e.chart;e.hint&&e.hint.hide(),e.readSelection(),e.filterAxes(),e.filterDataSource(),e.redrawSlaves(),n._selectEnd.call(n,t)},mainAxis:function(){var t=this.chart._plotArea;return t?t.namedCategoryAxes[M]:e}});F.setup=function(t,e){t=t||{},e=e||{};var n=l({},e.navigator,t.navigator),i=t.panes=[].concat(t.panes),o=l({},n.pane,{name:P});n.visible||(o.visible=!1,o.height=.1),i.push(o),F.attachAxes(t,n),F.attachSeries(t,n,e)},F.attachAxes=function(t,e){var n=e.series||[],i=t.categoryAxis=[].concat(t.categoryAxis),o=t.valueAxis=[].concat(t.valueAxis),r=f(n,E),a=0===r.length,s=l({type:"date",pane:P,roundToBaseUnit:!a,justified:a,_collapse:!1,tooltip:{visible:!1},labels:{step:1},autoBind:!e.dataSource,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]},_overlap:!1}),c=e.categoryAxis;i.push(l({},s,{maxDateGroups:200},c,{name:M,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),l({},s,c,{name:M+"_labels",maxDateGroups:20,baseUnitStep:"auto",autoBaseUnitSteps:{minutes:[]},majorTicks:{visible:!0}}),l({},s,c,{name:M+"_ticks",maxDateGroups:200,majorTicks:{visible:!0,width:.5},labels:{visible:!1,mirror:!0}})),o.push(l({name:M,pane:P,majorGridLines:{visible:!1},visible:!1},e.valueAxis))},F.attachSeries=function(t,e,n){var i,o=t.series=t.series||[],r=[].concat(e.series||[]),a=n.seriesColors,s=e.seriesDefaults;for(i=0;r.length>i;i++)o.push(l({color:a[i%a.length],categoryField:e.dateField,visibleInLegend:!1,tooltip:{visible:!1}},s,r[i],{axis:M,categoryAxis:M,autoBind:!e.dataSource}))},F.buildFilter=function(t,e){return[{field:"Date",operator:"gte",value:b(t)},{field:"Date",operator:"lt",value:b(e)}]},o=a.extend({init:function(e,n){var i=this;i.options=l({},i.options,n),i.container=e,i.chartPadding={top:parseInt(e.css("paddingTop"),10),left:parseInt(e.css("paddingLeft"),10)},i.template=i.template,i.template||(i.template=i.template=x("<div class='"+T+"navigator-hint' style='display: none; position: absolute; top: 1px; left: 1px;'><div class='"+T+"tooltip "+T+"chart-tooltip'>&nbsp;</div><div class='"+T+"scroll' /></div>")),i.element=t(i.template()).appendTo(e)},options:{format:"{0:d} - {1:d}",hideDelay:500},show:function(t,e,n){var i,o=this,a=b(k(t)+k(e-t)/2),s=o.options,l=r.format(o.options.format,t,e),c=o.element.find("."+T+"tooltip"),h=o.element.find("."+T+"scroll"),d=.4*n.width(),u=n.center().x-d,f=n.center().x,g=f-u,m=s.max-s.min,v=g/m,y=a-s.min;o._hideTimeout&&clearTimeout(o._hideTimeout),o._visible||(o.element.stop(!1,!0).css("visibility","hidden").show(),o._visible=!0),s.template&&(i=p(s.template),l=i({from:t,to:e})),c.html(l).css({left:n.center().x-c.outerWidth()/2,top:n.y1}),h.css({width:d,left:u+y*v,top:n.y1+parseInt(c.css("margin-top"),10)+parseInt(c.css("border-top-width"),10)+c.height()/2}),o.element.css("visibility","visible")},hide:function(){var t=this;t._hideTimeout&&clearTimeout(t._hideTimeout),t._hideTimeout=setTimeout(function(){t._visible=!1,t.element.fadeOut("slow")},t.options.hideDelay)}}),d.ui.plugin(z),l(d,{Navigator:F})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(t,e){e()});